\section{Algoritmo de Simulação}

O algoritmo do simulador do processador RISC-V RV32IM é apresentado em \textit{algorithm \ref{alg:simulacao}}.

\BlankLine

\begin{algorithm}[ht]
    \caption{Algoritmo do simulador do processador RISC-V RV32IM.}
    \label{alg:simulacao}
    
    % defining key words to use in the text
    \SetKwInput{KwEntrada}{Entrada}
    \SetKwInOut{KwSaida}{Saída}
    \SetKwFunction{KwSimularExecucaoPrograma}{SimularExecucaoPrograma}

    \SetAlgoLined
    
    \BlankLine

    \KwEntrada {\textit{programa compilado/linked}}

    \BlankLine

    \KwSaida {\textit{arquivo de log de saída programa compilado exemplo: 000.main.log}}

    \BlankLine

    \KwSimularExecucaoPrograma{programa compilado}    
    \Begin{

        inicializar circuito atribuindo valor 0 a todas as variáveis

        inicializar indicador de tempo da simulação

        % \CommentSty{O circuito estabilizará quando duas saídas consecutivas forem iguais.}
        
        \While{circuito não estabilizar}
        {
            \BlankLine

            \ForEach{estimulo}
            {
                \BlankLine

                \eIf{variavel}
                {
                    atribuir valor lido à respectiva variável

                    retornar para ler novo estímulo
                }
                {
                    \CommentSty{Processar conforme a quantidade de indicador de tempo}

                    \While{circuito não estabilizar}
                    {
                        calcular portas lógicas do circuito conforme o atraso 
                        (\textit{quando atraso 0, utilizar os valores do tempo atual nas entradas das portas lógicas e 
                            quando atraso 1, utilizar os valores do tempo de simulação anterior nas entradas
                            das portas lógicas}).
                    }     
                    
                    gerar saída utilizando o tempo atual da simulação e os valores de todas as variáveis do circuito
                }

                \BlankLine

                incrementar indicador de tempo da simulação

                \BlankLine

            }

            \BlankLine

            \CommentSty{/* Executa novamente o circuito lógico visando sua estabilização devido ao término 
            dos estímulos de entrada. */}

            \If{circuito não estabilizar}
            {
                calcular portas lógicas do circuito conforme o atraso 

                incrementar indicador de tempo da simulação
            }

        }
        
    }
            
    \BlankLine

    \BlankLine

    \CommentSty{/* Programa principal que gerencia a simulação de programas no processador RISC-V RV32IM*/}

    \BlankLine

    \ForEach{programa compilado}
    {    
        ler programa compilado

        \BlankLine
        
        \KwSimularExecucaoPrograma{programa compilado}    

        \BlankLine

        gerar arquivo de log de saída do programa compilado 

    } 

\end{algorithm}